<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 3 Les chaînes de caractères | Manipulation de données avec R</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 3 Les chaînes de caractères | Manipulation de données avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 3 Les chaînes de caractères | Manipulation de données avec R" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Sébastien Déjean et Thibault Laurent" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="les-facteurs.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R avancé</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#usage"><i class="fa fa-check"></i><b>1.1</b> Usage</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#render-book"><i class="fa fa-check"></i><b>1.2</b> Render book</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#preview-book"><i class="fa fa-check"></i><b>1.3</b> Preview book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#principe-du-document"><i class="fa fa-check"></i><b>2.1</b> Principe du document</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#pré-requis"><i class="fa fa-check"></i><b>2.2</b> Pré-requis</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#packages-à-installer"><i class="fa fa-check"></i><b>2.3</b> Packages à installer</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html"><i class="fa fa-check"></i><b>3</b> Les chaînes de caractères</a>
<ul>
<li class="chapter" data-level="3.1" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#fonctions-de-base"><i class="fa fa-check"></i><b>3.1</b> Fonctions de base</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#nchar"><i class="fa fa-check"></i><b>3.1.1</b> <em>nchar()</em></a></li>
<li class="chapter" data-level="3.1.2" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#substr"><i class="fa fa-check"></i><b>3.1.2</b> <em>substr()</em></a></li>
<li class="chapter" data-level="3.1.3" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#strsplit"><i class="fa fa-check"></i><b>3.1.3</b> <em>strsplit()</em></a></li>
<li class="chapter" data-level="3.1.4" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#toupper-tolower"><i class="fa fa-check"></i><b>3.1.4</b> <em>toupper()</em>, <em>tolower()</em></a></li>
<li class="chapter" data-level="3.1.5" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#grep"><i class="fa fa-check"></i><b>3.1.5</b> <em>grep()</em></a></li>
<li class="chapter" data-level="3.1.6" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#agrep"><i class="fa fa-check"></i><b>3.1.6</b> <em>agrep()</em></a></li>
<li class="chapter" data-level="3.1.7" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#regexpr"><i class="fa fa-check"></i><b>3.1.7</b> <em>regexpr()</em></a></li>
<li class="chapter" data-level="3.1.8" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#abbreviate"><i class="fa fa-check"></i><b>3.1.8</b> <em>abbreviate()</em></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#les-expressions-régulières"><i class="fa fa-check"></i><b>3.2</b> Les expressions régulières</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#définition"><i class="fa fa-check"></i><b>3.2.1</b> Définition</a></li>
<li class="chapter" data-level="3.2.2" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#les-autres-expressions-régulières"><i class="fa fa-check"></i><b>3.2.2</b> Les autres expressions régulières</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#application-aux-tweets"><i class="fa fa-check"></i><b>3.3</b> Application aux tweets</a></li>
<li class="chapter" data-level="3.4" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#nuage-de-mots"><i class="fa fa-check"></i><b>3.4</b> Nuage de mots</a></li>
<li class="chapter" data-level="3.5" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#ordonnancement"><i class="fa fa-check"></i><b>3.5</b> Ordonnancement</a></li>
<li class="chapter" data-level="3.6" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#package-stringr"><i class="fa fa-check"></i><b>3.6</b> Package <strong>stringr</strong></a></li>
<li class="chapter" data-level="3.7" data-path="les-chaînes-de-caractères.html"><a href="les-chaînes-de-caractères.html#package-glue"><i class="fa fa-check"></i><b>3.7</b> Package <strong>glue</strong></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="les-facteurs.html"><a href="les-facteurs.html"><i class="fa fa-check"></i><b>4</b> Les facteurs</a></li>
<li class="chapter" data-level="5" data-path="les-dates.html"><a href="les-dates.html"><i class="fa fa-check"></i><b>5</b> Les dates</a>
<ul>
<li class="chapter" data-level="5.1" data-path="les-dates.html"><a href="les-dates.html#dates-et-unités-de-temps"><i class="fa fa-check"></i><b>5.1</b> Dates et unités de temps</a></li>
<li class="chapter" data-level="5.2" data-path="les-dates.html"><a href="les-dates.html#séries-temporelles"><i class="fa fa-check"></i><b>5.2</b> Séries temporelles</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="opérations-ensemblistes.html"><a href="opérations-ensemblistes.html"><i class="fa fa-check"></i><b>6</b> Opérations ensemblistes</a>
<ul>
<li class="chapter" data-level="6.1" data-path="opérations-ensemblistes.html"><a href="opérations-ensemblistes.html#lunion"><i class="fa fa-check"></i><b>6.1</b> L’union</a></li>
<li class="chapter" data-level="6.2" data-path="opérations-ensemblistes.html"><a href="opérations-ensemblistes.html#lintersection"><i class="fa fa-check"></i><b>6.2</b> L’intersection</a></li>
<li class="chapter" data-level="6.3" data-path="opérations-ensemblistes.html"><a href="opérations-ensemblistes.html#la-différence-a-b-différent-de-b-a"><i class="fa fa-check"></i><b>6.3</b> La différence (<span class="math inline">\(A-B\)</span>, différent de <span class="math inline">\(B-A\)</span>)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html"><i class="fa fa-check"></i><b>7</b> Manipulation de bases de données</a>
<ul>
<li class="chapter" data-level="7.1" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#jointure-et-agrégation"><i class="fa fa-check"></i><b>7.1</b> Jointure et agrégation</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#jointure-sans-utiliser-la-fonction-merge"><i class="fa fa-check"></i><b>7.1.1</b> Jointure sans utiliser la fonction <em>merge()</em></a></li>
<li class="chapter" data-level="7.1.2" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#jointure-en-utilisant-la-fonction-merge"><i class="fa fa-check"></i><b>7.1.2</b> Jointure en utilisant la fonction <em>merge()</em></a></li>
<li class="chapter" data-level="7.1.3" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#aggrégation"><i class="fa fa-check"></i><b>7.1.3</b> Aggrégation</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#package-dplyr"><i class="fa fa-check"></i><b>7.2</b> Package <strong>dplyr</strong></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#sélection-de-lignes-avec-la-fonction-filter"><i class="fa fa-check"></i><b>7.2.1</b> Sélection de lignes avec la fonction <em>filter()</em></a></li>
<li class="chapter" data-level="7.2.2" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#trier-le-jeu-de-données-avec-la-fonction-arrange"><i class="fa fa-check"></i><b>7.2.2</b> Trier le jeu de données avec la fonction <em>arrange()</em></a></li>
<li class="chapter" data-level="7.2.3" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#sélectionner-certaines-variables-avec-la-fonction-select"><i class="fa fa-check"></i><b>7.2.3</b> Sélectionner certaines variables avec la fonction <em>select()</em></a></li>
<li class="chapter" data-level="7.2.4" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#changer-le-nom-de-variables-avec-la-fonction-rename"><i class="fa fa-check"></i><b>7.2.4</b> Changer le nom de variables avec la fonction <em>rename()</em></a></li>
<li class="chapter" data-level="7.2.5" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#ajouter-une-nouvelle-colonne-avec-la-fonction-mutate"><i class="fa fa-check"></i><b>7.2.5</b> Ajouter une nouvelle colonne avec la fonction <em>mutate()</em></a></li>
<li class="chapter" data-level="7.2.6" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#faire-des-calculs-statistiques-avec-la-fonction-summarise"><i class="fa fa-check"></i><b>7.2.6</b> Faire des calculs statistiques avec la fonction <em>summarise()</em></a></li>
<li class="chapter" data-level="7.2.7" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#faire-des-calculs-statistiques-en-utilisant-une-nouvelle-syntaxe"><i class="fa fa-check"></i><b>7.2.7</b> Faire des calculs statistiques en utilisant une nouvelle syntaxe</a></li>
<li class="chapter" data-level="7.2.8" data-path="manipulation-de-bases-de-données.html"><a href="manipulation-de-bases-de-données.html#tirer-un-échantillon-dune-population"><i class="fa fa-check"></i><b>7.2.8</b> Tirer un échantillon d’une population</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>8</b> Tidy data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tidy-data.html"><a href="tidy-data.html#la-fonction-pivot_longer-transformer-des-colonnes-en-lignes"><i class="fa fa-check"></i><b>8.1</b> La fonction <em>pivot_longer()</em> : transformer des colonnes en lignes</a></li>
<li class="chapter" data-level="8.2" data-path="tidy-data.html"><a href="tidy-data.html#la-fonction-pivot_wider-transformer-des-lignes-en-colonnes"><i class="fa fa-check"></i><b>8.2</b> La fonction <em>pivot_wider()</em> : transformer des lignes en colonnes</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tidy-data.html"><a href="tidy-data.html#la-fonction-separate"><i class="fa fa-check"></i><b>8.2.1</b> La fonction <em>separate()</em></a></li>
<li class="chapter" data-level="8.2.2" data-path="tidy-data.html"><a href="tidy-data.html#la-fonction-unite"><i class="fa fa-check"></i><b>8.2.2</b> La fonction <em>unite()</em></a></li>
<li class="chapter" data-level="8.2.3" data-path="tidy-data.html"><a href="tidy-data.html#la-fonction-extract"><i class="fa fa-check"></i><b>8.2.3</b> La fonction <em>extract()</em></a></li>
<li class="chapter" data-level="8.2.4" data-path="tidy-data.html"><a href="tidy-data.html#la-fonction-complete"><i class="fa fa-check"></i><b>8.2.4</b> La fonction <em>complete()</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html"><i class="fa fa-check"></i><b>9</b> Gestion de données volumineuses</a>
<ul>
<li class="chapter" data-level="9.1" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#optimiser-la-fonction-read.table"><i class="fa fa-check"></i><b>9.1</b> Optimiser la fonction <em>read.table()</em></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#astuce-1"><i class="fa fa-check"></i><b>9.1.1</b> Astuce 1</a></li>
<li class="chapter" data-level="9.1.2" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#astuce-2"><i class="fa fa-check"></i><b>9.1.2</b> Astuce 2</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#le-package-readr"><i class="fa fa-check"></i><b>9.2</b> Le package <strong>readr</strong></a></li>
<li class="chapter" data-level="9.3" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#autres-packages"><i class="fa fa-check"></i><b>9.3</b> Autres packages</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#package-data.table"><i class="fa fa-check"></i><b>9.3.1</b> Package <strong>data.table</strong></a></li>
<li class="chapter" data-level="9.3.2" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#package-ff"><i class="fa fa-check"></i><b>9.3.2</b> Package <strong>ff</strong></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#algorithme-de-type-mapreducce"><i class="fa fa-check"></i><b>9.4</b> Algorithme de type Map/Reducce</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#package-matrix"><i class="fa fa-check"></i><b>9.4.1</b> Package <strong>Matrix</strong></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#interaction-avec-des-systèmes-de-gestion-de-bases-de-données"><i class="fa fa-check"></i><b>9.5</b> Interaction avec des systèmes de gestion de bases de données</a></li>
<li class="chapter" data-level="9.6" data-path="gestion-de-données-volumineuses.html"><a href="gestion-de-données-volumineuses.html#utiliser-la-syntaxe-sql"><i class="fa fa-check"></i><b>9.6</b> utiliser la syntaxe SQL</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="visualiser-et-traiter-les-données-manquantes.html"><a href="visualiser-et-traiter-les-données-manquantes.html"><i class="fa fa-check"></i><b>10</b> Visualiser et traiter les données manquantes</a></li>
<li class="chapter" data-level="11" data-path="répertoires-et-fichiers.html"><a href="répertoires-et-fichiers.html"><i class="fa fa-check"></i><b>11</b> Répertoires et fichiers</a></li>
<li class="chapter" data-level="12" data-path="autour-de-lespace-de-travail.html"><a href="autour-de-lespace-de-travail.html"><i class="fa fa-check"></i><b>12</b> Autour de l’espace de travail</a></li>
<li class="chapter" data-level="13" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html"><i class="fa fa-check"></i><b>13</b> Footnotes and citations</a>
<ul>
<li class="chapter" data-level="13.1" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#footnotes"><i class="fa fa-check"></i><b>13.1</b> Footnotes</a></li>
<li class="chapter" data-level="13.2" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#citations"><i class="fa fa-check"></i><b>13.2</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="hello-bookdown.html"><a href="hello-bookdown.html"><i class="fa fa-check"></i><b>14</b> Hello bookdown</a>
<ul>
<li class="chapter" data-level="14.1" data-path="hello-bookdown.html"><a href="hello-bookdown.html#a-section"><i class="fa fa-check"></i><b>14.1</b> A section</a>
<ul>
<li class="chapter" data-level="" data-path="hello-bookdown.html"><a href="hello-bookdown.html#an-unnumbered-section"><i class="fa fa-check"></i>An unnumbered section</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="cross.html"><a href="cross.html"><i class="fa fa-check"></i><b>15</b> Cross-references</a>
<ul>
<li class="chapter" data-level="15.1" data-path="cross.html"><a href="cross.html#chapters-and-sub-chapters"><i class="fa fa-check"></i><b>15.1</b> Chapters and sub-chapters</a></li>
<li class="chapter" data-level="15.2" data-path="cross.html"><a href="cross.html#captioned-figures-and-tables"><i class="fa fa-check"></i><b>15.2</b> Captioned figures and tables</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="parts.html"><a href="parts.html"><i class="fa fa-check"></i><b>16</b> Parts</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="17" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>17</b> Blocks</a>
<ul>
<li class="chapter" data-level="17.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>17.1</b> Equations</a></li>
<li class="chapter" data-level="17.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>17.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="17.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>17.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>18</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="18.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>18.1</b> Publishing</a></li>
<li class="chapter" data-level="18.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>18.2</b> 404 pages</a></li>
<li class="chapter" data-level="18.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>18.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manipulation de données avec <strong>R</strong></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="les-chaînes-de-caractères" class="section level1" number="3">
<h1><span class="header-section-number">Chapitre 3</span> Les chaînes de caractères</h1>
<div id="fonctions-de-base" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Fonctions de base</h2>
<p>On considère la chaîne de caractère suivante :</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="les-chaînes-de-caractères.html#cb4-1" aria-hidden="true" tabindex="-1"></a>phrase <span class="ot">&lt;-</span> <span class="st">&quot;Notes obtenues</span><span class="sc">\n</span><span class="st">anglais: 16, Stat:14, Eco=18&quot;</span></span>
<span id="cb4-2"><a href="les-chaînes-de-caractères.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(phrase)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Parmi les fonctions qui permettent de manipuler les chaînes de caractères, voici celles qui nous semblent importantes de connaître :</p>
<div id="nchar" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> <em>nchar()</em></h3>
<p>Permet de compter le nombre de caractères de chaque élément d’un vecteur :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="les-chaînes-de-caractères.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(phrase)</span></code></pre></div>
<pre><code>## [1] 43</code></pre>
</div>
<div id="substr" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> <em>substr()</em></h3>
<p>Permet d’extraire un sous-ensemble de caractères :</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="les-chaînes-de-caractères.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(phrase, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Notes&quot;</code></pre>
</div>
<div id="strsplit" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> <em>strsplit()</em></h3>
<p>Permet d’éclater une chaîne de caractères dès qu’on trouve une sous-chaîne particulière :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="les-chaînes-de-caractères.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(phrase, <span class="at">split =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Notes&quot;              &quot;obtenues\nanglais:&quot; &quot;16,&quot;               
## [4] &quot;Stat:14,&quot;           &quot;Eco=18&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="les-chaînes-de-caractères.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(phrase, <span class="at">split =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Notes obtenues&quot;               &quot;anglais: 16, Stat:14, Eco=18&quot;</code></pre>
<p><strong>Remarque 1 :</strong> un espace est considéré comme une chaîne de caractère.</p>
<p><strong>Remarque 2 :</strong> “\n” est un caractère spécial qui correspond à un saut de ligne (pour consulter la liste des caractères spéciaux, voir cette <a href="http://help.stonesoft.com/onlinehelp/StoneGate/SMC/5.3.6/SGAG/SG_RegularExpressions/Special_Character_Sequences.htm">page web</a>). Pour évaluer un caractère spécial dans une chaîne de caractère, on peut utiliser la fonction <em>cat()</em>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="les-chaînes-de-caractères.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(phrase)</span></code></pre></div>
<pre><code>## Notes obtenues
## anglais: 16, Stat:14, Eco=18</code></pre>
<p><strong>Remarque 3 :</strong> l’objet retourné est de type <strong>list</strong>. Pour convertir une <strong>list</strong> en un vecteur, sur lequel il est plus facile de faire de la manipulation, on utilise la fonction <em>unlist()</em>. Enfin, si on veut éclater une chaîne de caractère en fonction de plusieurs caractères, on utilise le symbole |. Dans l’exemple suivant, l’idée est de séparer tous les mots en présence d’un des caractères spéciaux :</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="les-chaînes-de-caractères.html#cb16-1" aria-hidden="true" tabindex="-1"></a>(mots <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(phrase, <span class="at">split =</span> <span class="st">&quot;,|</span><span class="sc">\n</span><span class="st">| |:|=&quot;</span>))</span></code></pre></div>
<pre><code>## [[1]]
##  [1] &quot;Notes&quot;    &quot;obtenues&quot; &quot;anglais&quot;  &quot;&quot;         &quot;16&quot;       &quot;&quot;        
##  [7] &quot;Stat&quot;     &quot;14&quot;       &quot;&quot;         &quot;Eco&quot;      &quot;18&quot;</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="les-chaînes-de-caractères.html#cb18-1" aria-hidden="true" tabindex="-1"></a>(mots <span class="ot">&lt;-</span> <span class="fu">unlist</span>(mots))</span></code></pre></div>
<pre><code>##  [1] &quot;Notes&quot;    &quot;obtenues&quot; &quot;anglais&quot;  &quot;&quot;         &quot;16&quot;       &quot;&quot;        
##  [7] &quot;Stat&quot;     &quot;14&quot;       &quot;&quot;         &quot;Eco&quot;      &quot;18&quot;</code></pre>
<p>Si on utilise le type <strong>NULL</strong> comme critère de recherche, cela a pour effet d’éclater tous les éléments de la chaîne de caractères en des caractères uniques :</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="les-chaînes-de-caractères.html#cb20-1" aria-hidden="true" tabindex="-1"></a>(lettres <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(phrase, <span class="at">split =</span> <span class="cn">NULL</span>))</span></code></pre></div>
<pre><code>## [[1]]
##  [1] &quot;N&quot;  &quot;o&quot;  &quot;t&quot;  &quot;e&quot;  &quot;s&quot;  &quot; &quot;  &quot;o&quot;  &quot;b&quot;  &quot;t&quot;  &quot;e&quot;  &quot;n&quot;  &quot;u&quot;  &quot;e&quot;  &quot;s&quot;  &quot;\n&quot;
## [16] &quot;a&quot;  &quot;n&quot;  &quot;g&quot;  &quot;l&quot;  &quot;a&quot;  &quot;i&quot;  &quot;s&quot;  &quot;:&quot;  &quot; &quot;  &quot;1&quot;  &quot;6&quot;  &quot;,&quot;  &quot; &quot;  &quot;S&quot;  &quot;t&quot; 
## [31] &quot;a&quot;  &quot;t&quot;  &quot;:&quot;  &quot;1&quot;  &quot;4&quot;  &quot;,&quot;  &quot; &quot;  &quot;E&quot;  &quot;c&quot;  &quot;o&quot;  &quot;=&quot;  &quot;1&quot;  &quot;8&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="les-chaînes-de-caractères.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(lettres[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] 43</code></pre>
<p><strong>Remarque :</strong> dans le contexte d’une étude statistique, on appliquera cette fonction à des vecteurs de caractère. Par exemple :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="les-chaînes-de-caractères.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(mots, <span class="at">split =</span> <span class="st">&quot;:&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Notes&quot;
## 
## [[2]]
## [1] &quot;obtenues&quot;
## 
## [[3]]
## [1] &quot;anglais&quot;
## 
## [[4]]
## character(0)
## 
## [[5]]
## [1] &quot;16&quot;
## 
## [[6]]
## character(0)
## 
## [[7]]
## [1] &quot;Stat&quot;
## 
## [[8]]
## [1] &quot;14&quot;
## 
## [[9]]
## character(0)
## 
## [[10]]
## [1] &quot;Eco&quot;
## 
## [[11]]
## [1] &quot;18&quot;</code></pre>
</div>
<div id="toupper-tolower" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> <em>toupper()</em>, <em>tolower()</em></h3>
<p>Pemettent de convertir toutes les lettres en majuscules et minuscules :</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="les-chaînes-de-caractères.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(phrase)</span></code></pre></div>
<pre><code>## [1] &quot;NOTES OBTENUES\nANGLAIS: 16, STAT:14, ECO=18&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="les-chaînes-de-caractères.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(<span class="st">&quot;AAA&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;aaa&quot;</code></pre>
</div>
<div id="grep" class="section level3" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> <em>grep()</em></h3>
<p>Permet de trouver dans un vecteur de caractères quels sont les indices des composantes du vecteur qui contiennent un ensemble de caractères. Par exemple quels sont les mots qui contiennent la lettre “e” :</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="les-chaînes-de-caractères.html#cb30-1" aria-hidden="true" tabindex="-1"></a>(res <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;e&quot;</span>, <span class="at">x =</span> mots))</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="les-chaînes-de-caractères.html#cb32-1" aria-hidden="true" tabindex="-1"></a>mots[res]</span></code></pre></div>
<pre><code>## [1] &quot;Notes&quot;    &quot;obtenues&quot;</code></pre>
<p>On peut chercher plusieurs lettres à la fois. Ici, on cherche les mots qui contiennent une des lettres “j,” “J” et “t.” Pour cela, on utilise une expression régulière grâce aux crochets (nous verrons dans la section suivante plus en détail le fonctionnement des expressions régulières) :</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="les-chaînes-de-caractères.html#cb34-1" aria-hidden="true" tabindex="-1"></a>(res <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;[jSE]&quot;</span>, <span class="at">x =</span> mots))</span></code></pre></div>
<pre><code>## [1]  7 10</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="les-chaînes-de-caractères.html#cb36-1" aria-hidden="true" tabindex="-1"></a>mots[res]</span></code></pre></div>
<pre><code>## [1] &quot;Stat&quot; &quot;Eco&quot;</code></pre>
<p><strong>Remarque :</strong> un vecteur de taille nulle est retourné si le critère n’est pas satisfait.</p>
</div>
<div id="agrep" class="section level3" number="3.1.6">
<h3><span class="header-section-number">3.1.6</span> <em>agrep()</em></h3>
<p>Pemet de trouver dans un vecteur de caractères quels sont les indices des composantes du vecteur qui contiennent “approximativement” une sous-chaîne, l’approximation pouvant être réglée avec les options de la fonction. Dans l’exemple suivant, la lettre s minuscule est différente de S majuscule, mais cette différence d’1 caractère sera tolérée.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="les-chaînes-de-caractères.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">agrep</span>(<span class="st">&quot;stat&quot;</span>, mots)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p><strong>Remarque :</strong> lorsqu’on traite des fichiers de données brutes, ce fichier peut contenir des erreurs de saisie, par exemple “Toulouze” au lieu de “Toulouse” et c’est pourquoi le fait de tolérer un nombre de différences peut s’avérer intéressant.</p>
<ul>
<li><em>sub()</em> pour changer une sous-chaîne de caractères par une autre :</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="les-chaînes-de-caractères.html#cb40-1" aria-hidden="true" tabindex="-1"></a>(mots <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="at">pattern =</span> <span class="st">&quot;=&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;:&quot;</span>, <span class="at">x =</span> phrase))</span></code></pre></div>
<pre><code>## [1] &quot;Notes obtenues\nanglais: 16, Stat:14, Eco:18&quot;</code></pre>
</div>
<div id="regexpr" class="section level3" number="3.1.7">
<h3><span class="header-section-number">3.1.7</span> <em>regexpr()</em></h3>
<p>Permet de dire à quelle position dans le mot se trouve une sous-chaîne de caractères. Dans l’exemple suivant, on cherche à savoir où se trouve le caractère “:” dans les mots. Si un caractère est présent, alors la fonction retourne les positions de la lettre “:” et si elle n’apparaît pas, la valeur -1 est retournée. Le résultat est encore donné sous forme de <strong>list</strong> car cela permet de traiter chaque mot du vecteur.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="les-chaînes-de-caractères.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">&quot;:&quot;</span>, <span class="at">text =</span> mots, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><strong>Compléments :</strong> en pratique, on peut vouloir faire des recherches plus complexes (plusieurs caractères, des caractères spéciaux, etc), ce qui nécessite une adaptation dans les critères de recherche. La gestion des chaînes de caractères est synthétisée dans l’aide suivante :</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="les-chaînes-de-caractères.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(regexp)</span></code></pre></div>
</div>
<div id="abbreviate" class="section level3" number="3.1.8">
<h3><span class="header-section-number">3.1.8</span> <em>abbreviate()</em></h3>
<p>Pemet de faire des abbréviations de chaînes de caratères trop longue, tout en respectant l’unicité de chaque mot (autement dit, une même abbréviation ne peut pas être donnée à deux mots différents). Par exemple :</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="les-chaînes-de-caractères.html#cb44-1" aria-hidden="true" tabindex="-1"></a>pays <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Bosnie-Herzégovine&quot;</span>, <span class="st">&quot;Burkina Faso&quot;</span>,  <span class="st">&quot;Côte d&#39;Ivoire&quot;</span>)</span>
<span id="cb44-2"><a href="les-chaînes-de-caractères.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abbreviate</span>(pays)</span></code></pre></div>
<pre><code>## Warning in abbreviate(pays): abbreviate utilisé avec des caractères non ASCII</code></pre>
<pre><code>## Bosnie-Herzégovine       Burkina Faso      Côte d&#39;Ivoire 
##             &quot;Bs-H&quot;             &quot;BrkF&quot;             &quot;Cd&#39;I&quot;</code></pre>
<p><strong>Exercice 1.1</strong></p>
<p><strong>Q1</strong> Compter le nombre de caractères de chaque élément du vecteur suivant. Que constatez-vous ?</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="les-chaînes-de-caractères.html#cb47-1" aria-hidden="true" tabindex="-1"></a>x_with_missing <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;oui&quot;</span>, <span class="st">&quot;peut-être&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;non&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;si&quot;</span>)</span></code></pre></div>
<p><strong>Q2</strong> Dans le vecteur suivant, faire l’extraction des deux entiers qui se trouvent entre le symbole <strong>_</strong> et présenter le résultat sous forme de vecteur :</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="les-chaînes-de-caractères.html#cb48-1" aria-hidden="true" tabindex="-1"></a>code_INSEE <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;toulouse_31_HG&quot;</span>, <span class="st">&quot;lyon_69_Rhone&quot;</span>,</span>
<span id="cb48-2"><a href="les-chaînes-de-caractères.html#cb48-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;marsei_13_PACA&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="les-expressions-régulières" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Les expressions régulières</h2>
<p>Ce paragraphe s’inspire de cette <a href="http://eric.univ-lyon2.fr/~ricco/cours/slides/TM.E%20-%20expressions%20regulieres.pdf">note de cours</a> écrite par Ricco Rakotomalala.</p>
<p>On va s’attarder sur l’utilisation d’expressions régulières qui est très populaire dans certaines disciplines et notamment le text mining qui englobe l’analyse de tweets.</p>
<div id="définition" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Définition</h3>
<p>Une expression régulière est une séquence de caractères qui définit un motif d’intérêt. Par exemple, on considère le motif d’intérêt “b.b.” une séquence de 4 caractères où le 1er et 3ème caractères sont le caractère “b” et le 2ème et 4ème peuvent être n’importe quel autre caractère tel que “bobi,” “buba,” “bib1,” “bpbe,” “byb=,” etc.</p>
<p>On pourrait considérer un second motif d’intérêt “b.b.” une séquence de 4 caractères où le 1er et 3ème caractère sont le caractère “b” et le 2ème et 4ème peuvent être une voyelle uniquement. Dans ce cas, “bybe” serait un candidat, mais pas “bib1.”</p>
<p>Une expression régulière correspond donc à la syntaxe informatique qui sera utilisée pour détecter un motif d’intérêt.</p>
<div id="exemples" class="section level4" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Exemples</h4>
<p>Par défaut, les fonctions <em>strsplit()</em>, <em>grep()</em>, <em>sub()</em> ou <em>regexpr()</em> permettent d’utiliser une expression régulière comme critère de recherche. Par exemple, pour identifier le 1er motif d’intérêt, l’expression régulière est la suivante “b.b.” où le “.” indique donc que n’importe quel caractère est accepté</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="les-chaînes-de-caractères.html#cb49-1" aria-hidden="true" tabindex="-1"></a>textes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;bobi&quot;</span>, <span class="st">&quot;bibé&quot;</span>, <span class="st">&quot;tatane&quot;</span>, <span class="st">&quot;bAbA&quot;</span>, <span class="st">&quot;tbtc&quot;</span>,</span>
<span id="cb49-2"><a href="les-chaînes-de-caractères.html#cb49-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;tut&quot;</span>, <span class="st">&quot;byb=&quot;</span>, <span class="st">&quot;baba&quot;</span>, <span class="st">&quot;bub1&quot;</span>, <span class="st">&quot;t5t3&quot;</span>)</span>
<span id="cb49-3"><a href="les-chaînes-de-caractères.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;b.b.&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 1 2 4 7 8 9</code></pre>
<p>Pour le second motif d’intérêt, on va utiliser l’expression régulière suivante :</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="les-chaînes-de-caractères.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;b[aeiouy]b[aeiouy]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 1 8</code></pre>
<p>On met entre crochets les caractères qui sont autorisés.</p>
<p>La négation des caractères autorisés est obtenue avec le symbole “^.” Par exemple, dans l’exemple suivant, on autorise tous les caractères sauf les voyelles :</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="les-chaînes-de-caractères.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;b[^aeiouy]b[^aeiouy]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Pour autoriser une suite de caractères, on utilise le symbole “-.” Par exemple, si on autorise uniquement les lettres minuscules de l’alphabet, on fait:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="les-chaînes-de-caractères.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;b[a-z]b[a-z]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 1 8</code></pre>
<p>Si on autorise toutes les lettres de l’alphabet (minuscules et majuscules ainsi que les caractères spéciaux comme les accents é, à, è, ç, etc.), on utilise la syntaxe “[:alpha:]” entre crochets. Par exemple :</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="les-chaînes-de-caractères.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;b[[:alpha:]]b[[:alpha:]]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 1 2 4 8</code></pre>
<p>Si on utilise toutes les lettres de l’alphabet ainsi que les chiffre numériques, on utilise la syntaxe “[:alnum:]” entre crochets. Par exemple :</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="les-chaînes-de-caractères.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;b[[:alnum:]]b[[:alnum:]]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 1 2 4 8 9</code></pre>
</div>
</div>
<div id="les-autres-expressions-régulières" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Les autres expressions régulières</h3>
<p>Nous avons résumé différentes expressions régulières pouvant être utilisées :</p>
<ul>
<li>[…] : un des caractères indiqués entre les crochets. Par exemple:</li>
</ul>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="les-chaînes-de-caractères.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;t[aeiouy]t[aeiouy]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<ul>
<li>[^...] : tous les caractères sauf ceux indiqués après le ^. Par exemple:</li>
</ul>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="les-chaînes-de-caractères.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;t[^aeiouy]t[^aeiouy]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1]  5 10</code></pre>
<ul>
<li>[x-y] : les caractères compris entre x à y inclus. Par exemple :</li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="les-chaînes-de-caractères.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;t[a-z]t[a-z]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<ul>
<li><p>[:alnum:] équivalent à a-zA-Z0-9 avec en plus les caractères spéciaux que l’on retrouve suivant les langues utilisées comme les é, è, ù, ç, à.</p></li>
<li><p>[:alpha:] équivalent à a-zA-Z avec en plus les caractères spéciaux que l’on retrouve suivant les langues utilisées</p></li>
<li><p>[:digit:] équivalent à 0-9. Par exemple :</p></li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="les-chaînes-de-caractères.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">grep</span>(<span class="st">&quot;t[[:digit:]]t[[:digit:]]&quot;</span>, textes))</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<ul>
<li><p>[:lower:] équivalent à a-z avec en plus les caractères spéciaux que l’on retrouve suivant les langues utilisées</p></li>
<li><p>[:upper:] équivalent à A-Z avec en plus les caractères spéciaux que l’on retrouve suivant les langues utilisées comme les Â, Û, Ô, etc.</p></li>
<li><p>[:xdigit:] équivalent à 0-9a-fA-F</p></li>
<li><p>[:graph:] tout caractère graphique</p></li>
<li><p>[:print:] tout caractère affichable</p></li>
<li><p>[:punct:] tout caractère de ponctuation</p></li>
<li><p>[:blank:] espace, tabulation</p></li>
<li><p>[:space:] espace, tabulation, nouvelle ligne, retour chariot</p></li>
<li><p>[:cntrl:] tout caractère de contrôle</p></li>
</ul>
<p><strong>Exercice 1.2</strong>:</p>
<p>On considère la chaîne de caractère suivante :</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="les-chaînes-de-caractères.html#cb69-1" aria-hidden="true" tabindex="-1"></a>ww <span class="ot">&lt;-</span> <span class="st">&quot;we went to warwick 5 times&quot;</span></span></code></pre></div>
<p>Avec la fonction <em>gregexpr()</em>, trouver les expressions régulières qui permettent de donner l’emplacement de :</p>
<ul>
<li>la chaîne de caractères “i”</li>
<li>un chiffre numérique</li>
<li>la chaîne de caractères “we”</li>
<li>une des deux chaînes de caractères “w” ou “e”</li>
<li>un pattern commençant par un espace suivi de la chaîne “w.”</li>
</ul>
</div>
</div>
<div id="application-aux-tweets" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Application aux tweets</h2>
<p>On considère le vecteur suivant dont les éléments correspondent à des extraits de tweets</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="les-chaînes-de-caractères.html#cb70-1" aria-hidden="true" tabindex="-1"></a>tweet <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;TopStartupsUSA: RT @FernandoX: 7 C&#39;s of Marketing in the Digital Era.</span><span class="sc">\n</span><span class="st">&quot;</span>, </span>
<span id="cb70-2"><a href="les-chaînes-de-caractères.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;#Analytics #MachineLearning #DataScience #MalWare #IIoT&quot;</span>, </span>
<span id="cb70-3"><a href="les-chaînes-de-caractères.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;YvesMulkers: RT @wil_bielert: RT @neptanum: Standard Model Physics from an Algebra?&quot;</span>, </span>
<span id="cb70-4"><a href="les-chaînes-de-caractères.html#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;#BigData #Analytics #DataScience #AI #MachineLearning #IoT #IIoT #Python&quot;</span>)</span></code></pre></div>
<p><strong>Exercice 1.3.</strong></p>
<p>Expliquer la fonction de chacune des expressions régulières suivantes</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="les-chaînes-de-caractères.html#cb71-1" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;(RT|via)((?:</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">W*@</span><span class="sc">\\</span><span class="st">w+)+)&quot;</span>, <span class="st">&quot;&quot;</span>, tweet)</span>
<span id="cb71-2"><a href="les-chaînes-de-caractères.html#cb71-2" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;@</span><span class="sc">\\</span><span class="st">w+&quot;</span>, <span class="st">&quot;&quot;</span>, correct)</span>
<span id="cb71-3"><a href="les-chaînes-de-caractères.html#cb71-3" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>, correct)</span>
<span id="cb71-4"><a href="les-chaînes-de-caractères.html#cb71-4" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[[:digit:]]&quot;</span>, <span class="st">&quot;&quot;</span>, correct)</span>
<span id="cb71-5"><a href="les-chaînes-de-caractères.html#cb71-5" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;http</span><span class="sc">\\</span><span class="st">w+&quot;</span>, <span class="st">&quot;&quot;</span>, correct)</span>
<span id="cb71-6"><a href="les-chaînes-de-caractères.html#cb71-6" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[</span><span class="sc">\t</span><span class="st"> ]{2,}&quot;</span>, <span class="st">&quot; &quot;</span>, correct)</span>
<span id="cb71-7"><a href="les-chaînes-de-caractères.html#cb71-7" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;^</span><span class="sc">\\</span><span class="st">s+|</span><span class="sc">\\</span><span class="st">s+$&quot;</span>, <span class="st">&quot;&quot;</span>, correct)</span>
<span id="cb71-8"><a href="les-chaînes-de-caractères.html#cb71-8" aria-hidden="true" tabindex="-1"></a>correct <span class="ot">&lt;-</span> <span class="fu">iconv</span>(correct, <span class="st">&quot;UTF-8&quot;</span>, <span class="st">&quot;ASCII&quot;</span>, <span class="at">sub =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
</div>
<div id="nuage-de-mots" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Nuage de mots</h2>
<p>On présente ici la fonction <em>wordcloud()</em> du package <strong>wordcloud</strong> qui permet de représenter un nuage de mots en fonctions du nombre d’occurences des mots trouvés dans un corps de texte.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="les-chaînes-de-caractères.html#cb72-1" aria-hidden="true" tabindex="-1"></a>word <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(correct, <span class="st">&quot; &quot;</span>))</span>
<span id="cb72-2"><a href="les-chaînes-de-caractères.html#cb72-2" aria-hidden="true" tabindex="-1"></a>tab_word <span class="ot">&lt;-</span> <span class="fu">table</span>(word)</span>
<span id="cb72-3"><a href="les-chaînes-de-caractères.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(<span class="st">&quot;wordcloud&quot;</span>)</span></code></pre></div>
<pre><code>## Le chargement a nécessité le package : wordcloud</code></pre>
<pre><code>## Le chargement a nécessité le package : RColorBrewer</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="les-chaînes-de-caractères.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="fu">names</span>(tab_word), tab_word)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-36-1.png" width="768" /></p>
</div>
<div id="ordonnancement" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Ordonnancement</h2>
<p>Les caractères peuvent s’ordonner comme on le fait avec des chiffres. Par exemple, le caratère “a” est plus petit que “b” qui n’est pas plus grand que “c.” Pour le vérifier :</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="les-chaînes-de-caractères.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;a&quot;</span> <span class="sc">&lt;</span> <span class="st">&quot;b&quot;</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="les-chaînes-de-caractères.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;b&quot;</span> <span class="sc">&gt;</span> <span class="st">&quot;c&quot;</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>On s’intéresse ici plus particulièrement aux règles d’ordonnancement utilisées pour la langue française. Selon la langue utilisée par la machine, il existe donc des règles particulières pour ordonnancer les chaînes de caractères, qui diffèrent d’une langue à l’autre. Pour vérifier la langue utilisée par la machine, on peut utiliser la commande</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="les-chaînes-de-caractères.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setlocale</span>(<span class="at">category =</span> <span class="st">&quot;LC_CTYPE&quot;</span>, <span class="at">locale =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;fr_FR.UTF-8&quot;</code></pre>
<p>Considérons la citation suivante stockée dans l’objet <strong>citation</strong> :</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="les-chaînes-de-caractères.html#cb82-1" aria-hidden="true" tabindex="-1"></a>citation <span class="ot">&lt;-</span> <span class="st">&quot;Il est important que les étudiants portent un regard neuf </span></span>
<span id="cb82-2"><a href="les-chaînes-de-caractères.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="st">et irrévérencieux  sur leurs études ; il ne doivent pas vénérer le savoir </span></span>
<span id="cb82-3"><a href="les-chaînes-de-caractères.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="st">mais le remettre en question (chapitre : 1 - paragraphe : 2 - ligne : 10 </span></span>
<span id="cb82-4"><a href="les-chaînes-de-caractères.html#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="st">- page : 185. Jacob Chanowski).&quot;</span></span></code></pre></div>
<p>On peut récupérer chaque “mot” (entités séparées par des espaces”) par la commande :</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="les-chaînes-de-caractères.html#cb83-1" aria-hidden="true" tabindex="-1"></a>(mots <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(citation, <span class="at">split =</span> <span class="st">&quot; &quot;</span>)))</span></code></pre></div>
<pre><code>##  [1] &quot;Il&quot;             &quot;est&quot;            &quot;important&quot;      &quot;que&quot;           
##  [5] &quot;les&quot;            &quot;étudiants&quot;      &quot;portent&quot;        &quot;un&quot;            
##  [9] &quot;regard&quot;         &quot;neuf&quot;           &quot;\net&quot;           &quot;irrévérencieux&quot;
## [13] &quot;&quot;               &quot;sur&quot;            &quot;leurs&quot;          &quot;études&quot;        
## [17] &quot;;&quot;              &quot;il&quot;             &quot;ne&quot;             &quot;doivent&quot;       
## [21] &quot;pas&quot;            &quot;vénérer&quot;        &quot;le&quot;             &quot;savoir&quot;        
## [25] &quot;\nmais&quot;         &quot;le&quot;             &quot;remettre&quot;       &quot;en&quot;            
## [29] &quot;question&quot;       &quot;(chapitre&quot;      &quot;:&quot;              &quot;1&quot;             
## [33] &quot;-&quot;              &quot;paragraphe&quot;     &quot;:&quot;              &quot;2&quot;             
## [37] &quot;-&quot;              &quot;ligne&quot;          &quot;:&quot;              &quot;10&quot;            
## [41] &quot;\n-&quot;            &quot;page&quot;           &quot;:&quot;              &quot;185.&quot;          
## [45] &quot;Jacob&quot;          &quot;Chanowski).&quot;</code></pre>
<p>Le tri des éléments (uniques) du vecteur <strong>mots</strong> nous montre les règles d’ordonnancement appliquées par <strong>R</strong>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="les-chaînes-de-caractères.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(mots))</span></code></pre></div>
<pre><code>##  [1] &quot;&quot;               &quot;\n-&quot;            &quot;\net&quot;           &quot;\nmais&quot;        
##  [5] &quot;-&quot;              &quot;;&quot;              &quot;:&quot;              &quot;(chapitre&quot;     
##  [9] &quot;1&quot;              &quot;10&quot;             &quot;185.&quot;           &quot;2&quot;             
## [13] &quot;Chanowski).&quot;    &quot;doivent&quot;        &quot;en&quot;             &quot;est&quot;           
## [17] &quot;études&quot;         &quot;étudiants&quot;      &quot;il&quot;             &quot;Il&quot;            
## [21] &quot;important&quot;      &quot;irrévérencieux&quot; &quot;Jacob&quot;          &quot;le&quot;            
## [25] &quot;les&quot;            &quot;leurs&quot;          &quot;ligne&quot;          &quot;ne&quot;            
## [29] &quot;neuf&quot;           &quot;page&quot;           &quot;paragraphe&quot;     &quot;pas&quot;           
## [33] &quot;portent&quot;        &quot;que&quot;            &quot;question&quot;       &quot;regard&quot;        
## [37] &quot;remettre&quot;       &quot;savoir&quot;         &quot;sur&quot;            &quot;un&quot;            
## [41] &quot;vénérer&quot;</code></pre>
<ul>
<li><p>les caractères spéciaux <strong>-</strong>, <strong>:</strong>, <strong>;</strong>, <strong>(</strong>, etc. sont prioritaires sur les chiffres et les lettres.</p></li>
<li><p>les chiffres sont prioritaires sur les lettres.</p></li>
<li><p>les mots sont ordonnancés comme dans un dictionnaire français.</p></li>
<li><p>quand il y a des lettres avec des accents, on ordonnance comme s’il n’y avait pas d’accents.</p></li>
<li><p>les lettres majuscules sont insérées dans l’ordre alphabétique et ne sont pas prioritaires par rapport aux lettres minuscules.</p></li>
<li><p>la syntaxe <em>“\n”</em> n’est pas comptabilisée.</p></li>
<li><p>les chiffres ne sont pas regardés comme des chiffres mais comme une chaîne de caractères. Autrement dit “10” doit être vu comme un mot avec 2 caractères consécutifs : “1,” puis “0.” “2” doit être vu comme 1 mot avec un seul caractère. Pour comparer ces 2 mots, on compare les caractères entre eux les uns après les autres. Dans un premier temps, on regarde le 1er caractère de chaque mot : “1” est plus petit que “2.” Aussi, quelque soit le nombre de caractère qu’on va ajouter après “1” ce mot sera plus petit que “2.” Par exemple “15552525” sera plus petit que “2.”</p></li>
</ul>
<p><strong>Exercice 1.4.</strong></p>
<p>A partir du jeu de données <strong>USArrests</strong>, extraire les lignes dont le nom contient la chaîne de caractères “New.” Vous pouvez vous inspirer des instructions suivantes. Dans le premier cas, tous les noms de lignes contenant la lettre <strong>C</strong> sont renvoyés ; dans le second cas, seuls ceux commencant par <strong>C</strong> sont renvoyés. Consulter la fiche d’aide sur les expressions régulières pour en savoir (beaucoup !) plus (<strong>help(regexp)</strong>).</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="les-chaînes-de-caractères.html#cb87-1" aria-hidden="true" tabindex="-1"></a>USArrests[<span class="fu">grep</span>(<span class="st">&quot;C&quot;</span>, <span class="fu">rownames</span>(USArrests)),]</span></code></pre></div>
<pre><code>##                Murder Assault UrbanPop Rape
## California        9.0     276       91 40.6
## Colorado          7.9     204       78 38.7
## Connecticut       3.3     110       77 11.1
## North Carolina   13.0     337       45 16.1
## South Carolina   14.4     279       48 22.5</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="les-chaînes-de-caractères.html#cb89-1" aria-hidden="true" tabindex="-1"></a>USArrests[<span class="fu">grep</span>(<span class="st">&quot;^C&quot;</span>, <span class="fu">rownames</span>(USArrests)),]</span></code></pre></div>
<pre><code>##             Murder Assault UrbanPop Rape
## California     9.0     276       91 40.6
## Colorado       7.9     204       78 38.7
## Connecticut    3.3     110       77 11.1</code></pre>
</div>
<div id="package-stringr" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Package <strong>stringr</strong></h2>
<p>On a vu ci-dessus les fonctions de base pour manipuler des chaînes de caractères. Toutefois, si on cherche à faire des statistiques un plus poussées sur les chaînes de caractères, on va devoir avoir recours aux fonctions <em>sapply()</em> ou <em>lapply()</em> qui permettent de faire des opérations sur les listes. Par exemple, on cherche à calculer le nombre de fois qu’apparaît la lettre “a” dans le vecteur <strong>mots</strong> précédent. Pour cela, on va appliquer la fonction <em>sapply()</em> (dont nous reparlerons plus tard) sur le résultat donné par la fonction <em>gregexpr()</em>. On rappelle que le résultat de cette fonction est -1 si le caractère n’a pas été trouvé et sinon, il retourne le vecteur des positions. Pour répondre à notre problème, on exécute donc le code suivant :</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="les-chaînes-de-caractères.html#cb91-1" aria-hidden="true" tabindex="-1"></a>res1 <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">&quot;a&quot;</span>, <span class="at">text =</span> mots, <span class="at">ignore.case =</span> T)</span>
<span id="cb91-2"><a href="les-chaînes-de-caractères.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(res1, <span class="cf">function</span>(x) <span class="fu">ifelse</span>(x[<span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="fu">length</span>(x), <span class="dv">0</span>)) </span></code></pre></div>
<pre><code>##  [1] 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 1 0 0 0 0 1 0 0 0 3 0 0 0 0
## [39] 0 0 0 1 0 0 1 1</code></pre>
<p>Le package <strong>stringr</strong> a vu le jour dans le but d’effacer certaines lacunes des fonctions de base et également simplifier la syntaxe des fonctions de base. Adopter les fonctions de ces packages revient un peu à oublier la syntaxe des fonctions que nous avons vues. Par exemple, la fonction <em>str_c()</em> est plus ou moins équivalente à la fonction <em>paste()</em>, la fonction <em>str_length()</em> est équivalent à la fonction <em>nchar()</em>. La fonction <em>str_count()</em> retourne le même résultat précédent en 1 seul ligne de commande :</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="les-chaînes-de-caractères.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb93-2"><a href="les-chaînes-de-caractères.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(mots, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 1 0 0 0 0 1 0 0 0 3 0 0 0 0
## [39] 0 0 0 1 0 0 1 1</code></pre>
<p>Parmi les autres fonctions intéressantes de ce package, on notera la fonction <em>str_pad()</em> qui permet de faire en sorte qu’une chaîne de caractère (1er argument de la fonction) possède au minimum un nombre de caractère (2ème argument) et la compléte si nécessaire avec un caractère (3ème argument). Par exemple, si on souhaite que chaque élément du vecteur suivant possède au moins 3 caractères et qu’on souhaite compléter les chaînes manquantes par le caractère “-” en début de chaîne, on procède ainsi :</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="les-chaînes-de-caractères.html#cb95-1" aria-hidden="true" tabindex="-1"></a>vec_to_change <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;105&quot;</span>, <span class="st">&quot;9999&quot;</span>, <span class="st">&quot;0008&quot;</span>)</span>
<span id="cb95-2"><a href="les-chaînes-de-caractères.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(vec_to_change, <span class="dv">4</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;0001&quot; &quot;0010&quot; &quot;0105&quot; &quot;9999&quot; &quot;0008&quot;</code></pre>
<p>On notera que le package <strong>stringr</strong> a été développé par Hadley Wickam (<strong>RStudio</strong>) qui est l’auteur d’un grand nombre d’autres packages avec cet esprit de rendre les choses plus simples pour l’utilisateur. Nous vous présenterons ces outils au fur et à mesure, mais à notre sens, il est important d’avoir conscience que derrière ces fonctions, se cachent des programmes qui utilisent les fonctions de base de <strong>R</strong>.</p>
<p>On citera également le package <strong>stringi</strong> qui propose un grand nombre de fonctions plus orientées vers l’analyse statistique de chaînes de caractères.</p>
<p><strong>Bibliographie</strong>
On pourra consulter ce document très intéressant et complet sur la gestion des chaînes de caractères avec <strong>R</strong> (la version gratuite est très bien) :
<a href="https://leanpub.com/r4strings" class="uri">https://leanpub.com/r4strings</a></p>
</div>
<div id="package-glue" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Package <strong>glue</strong></h2>
<p>Ce package contient la fonction <em>glue()</em> qui permet d’insérer dans du texte des objets qui ont été créés dans l’environnement courant.
En reprenant l’exemple de l’auteur du package (<a href="https://cran.r-project.org/web/packages/glue/readme/README.html" class="uri">https://cran.r-project.org/web/packages/glue/readme/README.html</a>) :</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="les-chaînes-de-caractères.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(<span class="st">&quot;glue&quot;</span>)</span></code></pre></div>
<pre><code>## Le chargement a nécessité le package : glue</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="les-chaînes-de-caractères.html#cb99-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Fred&quot;</span></span>
<span id="cb99-2"><a href="les-chaînes-de-caractères.html#cb99-2" aria-hidden="true" tabindex="-1"></a>anniversary <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;1991-10-12&quot;</span>)</span>
<span id="cb99-3"><a href="les-chaînes-de-caractères.html#cb99-3" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">floor</span>((<span class="fu">Sys.Date</span>() <span class="sc">-</span> anniversary)<span class="sc">/</span><span class="dv">365</span>))</span>
<span id="cb99-4"><a href="les-chaînes-de-caractères.html#cb99-4" aria-hidden="true" tabindex="-1"></a>new_object <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">&#39;My name is {name},&#39;</span>,</span>
<span id="cb99-5"><a href="les-chaînes-de-caractères.html#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39; my age next year is {age + 1},&#39;</span>,</span>
<span id="cb99-6"><a href="les-chaînes-de-caractères.html#cb99-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39; my anniversary is {format(anniversary, &quot;%A, %d %B, %Y&quot;)}.&#39;</span>)</span></code></pre></div>
<p><strong>Remarque:</strong> l’objet créé est à la fois un objet de type <strong>glue</strong> et <strong>character</strong> en même temps. La particularité de ce type d’objets est qu’il hérite de toutes les fonctions qui peuvent s’appliquer à ces deux types:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="les-chaînes-de-caractères.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(new_object)</span></code></pre></div>
<pre><code>## [1] &quot;glue&quot;      &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="les-chaînes-de-caractères.html#cb102-1" aria-hidden="true" tabindex="-1"></a>new_object</span></code></pre></div>
<pre><code>## My name is Fred, my age next year is 31, my anniversary is samedi, 12 octobre, 1991.</code></pre>
<p>Il est important de noter qu’une fois l’objet <strong>glue</strong> créé, sa valeur est fixée. Autrement dit, même si on modifie les objets qui ont été utilisés pour le créer, cela ne le modifiera (à moins bien sûr de re-exécuter la commande). Exemple :</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="les-chaînes-de-caractères.html#cb104-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Jojo&quot;</span></span>
<span id="cb104-2"><a href="les-chaînes-de-caractères.html#cb104-2" aria-hidden="true" tabindex="-1"></a>new_object</span></code></pre></div>
<pre><code>## My name is Fred, my age next year is 31, my anniversary is samedi, 12 octobre, 1991.</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="les-chaînes-de-caractères.html#cb106-1" aria-hidden="true" tabindex="-1"></a>new_object <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">&#39;My name is {name},&#39;</span>,</span>
<span id="cb106-2"><a href="les-chaînes-de-caractères.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39; my age next year is {age + 1},&#39;</span>,</span>
<span id="cb106-3"><a href="les-chaînes-de-caractères.html#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39; my anniversary is {format(anniversary, &quot;%A, %d %B, %Y&quot;)}.&#39;</span>)</span>
<span id="cb106-4"><a href="les-chaînes-de-caractères.html#cb106-4" aria-hidden="true" tabindex="-1"></a>new_object</span></code></pre></div>
<pre><code>## My name is Jojo, my age next year is 31, my anniversary is samedi, 12 octobre, 1991.</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="les-facteurs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-data-management.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
